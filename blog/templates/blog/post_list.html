{% extends "blog/base.html" %}
{% load custom_filters %}

{% block content %}
<style>
    .text-shadow {
        text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    }
</style>
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8 text-center">Latest Posts</h1>
    <div class="space-y-6 md:space-y-0 md:grid md:grid-cols-2 md:gap-6 lg:grid-cols-3">
        {% for post in posts %}
        <div class="relative overflow-hidden rounded-lg shadow-lg h-64 md:h-64">
            <div class="relative h-64 overflow-hidden">
                {% if post.image %}
                    <img src="{{ post.image.url }}" alt="{{ post.title }}" class="absolute inset-0 w-full h-full opacity-85 object-cover">
                {% else %}
                    <div class="absolute inset-0 bg-gray-200"></div>
                {% endif %}
                <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent opacity-70"></div>
                <div class="relative h-full p-6 flex flex-col justify-between">
                    <h2 class="text-xl font-semibold mb-2 text-white text-shadow">{{ post.title }}</h2>
                    <div class="flex flex-col">
                        <p class="text-sm text-gray-100 mb-4 md:mb-8 text-shadow">
                            {{ post.get_safe_content|striptags|truncatechars:100 }}
                        </p>
                        <div class="flex justify-end mt-16">
                            <a href="{% url 'post_detail' post.id %}" class="inline-block bg-blue-500 bg-opacity-85 hover:bg-opacity-100 text-white text-sm py-2 px-4 rounded transition duration-300">
                                Read More
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var flashMessage = document.getElementById('flash-message');
    if (flashMessage) {
        setTimeout(function() {
            flashMessage.style.transition = 'opacity 1s ease-out';
            flashMessage.style.opacity = '0';
            setTimeout(function() {
                flashMessage.remove();
            }, 1000);
        }, 5000); // Message will stay for 5 seconds before fading out
    }
});
</script>
{% endblock %}