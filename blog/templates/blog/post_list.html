{% extends "blog/base.html" %}
{% load custom_filters %}

{% block content %}
<style>
    .post-card {
        position: relative;
        overflow: hidden;
        background-color: rgba(200, 200, 200, 0.8); /* Light grey background */

    }
    .post-content {
        position: relative;
        z-index: 10;
        transition: opacity 0.3s ease;
    }
    .post-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    .post-card:hover .post-image {
        opacity: 1;
    }
    .post-card:hover .post-content {
        opacity: 0;
    }
</style>
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8 text-center">Latest Posts</h1>
    <div class="space-y-6 md:space-y-0 md:grid md:grid-cols-2 md:gap-6 lg:grid-cols-3">
        {% for post in posts %}
        <div class="relative overflow-hidden rounded-lg shadow-lg h-64 md:h-64">
            <div class="relative h-64 overflow-hidden">
                {% if post.image %}
                    <img src="{{ post.image.url }}" alt="{{ post.title }}" class="absolute inset-0 w-full h-full object-cover">
                {% else %}
                    <div class="absolute inset-0 bg-gray-200"></div>
                {% endif %}
                <div class="absolute inset-0 bg-black opacity-30"></div>
                <div class="relative h-full p-6 flex flex-col justify-between">
                    <h2 class="text-xl font-semibold mb-2 text-white">{{ post.title }}</h2>
                    <div class="flex flex-col">
                        <p class="text-sm text-gray-100 mb-4 md:mb-8">
                            {{ post.get_safe_content|striptags|truncatechars:100 }}
                        </p>
                        <div class="flex justify-end mt-16">
                            <a href="{% url 'post_detail' post.id %}" class="inline-block bg-blue-500 bg-opacity-85 hover:bg-opacity-100 text-white text-sm py-2 px-4 rounded transition duration-300">
                                Read More
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
<!--    var flashMessage = document.getElementById('flash-message');-->
<!--    if (flashMessage) {-->
<!--        setTimeout(function() {-->
<!--            flashMessage.style.transition = 'opacity 1s ease-out';-->
<!--            flashMessage.style.opacity = '0';-->
<!--            setTimeout(function() {-->
<!--                flashMessage.remove();-->
<!--            }, 1000);-->
<!--        }, 5000); // Message will stay for 5 seconds before fading out-->
<!--    }-->

    const postCards = document.querySelectorAll('.post-card');

    postCards.forEach(card => {
        let timeoutId;

        card.addEventListener('mouseenter', () => {
            clearTimeout(timeoutId);
            card.classList.add('hovered');
        });

        card.addEventListener('mouseleave', () => {
            timeoutId = setTimeout(() => {
                card.classList.remove('hovered');
            }, 2000);
        });
    });
});
</script>
{% endblock %}